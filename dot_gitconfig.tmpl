# This is Git's per-user configuration file.
[user]
	name = Jason Wadsworth
	email = {{ .email }}

[init]
	defaultBranch = main

[alias]
	default-branch = !sh -c 'git rev-parse --abbrev-ref origin/HEAD | cut -d "/" -f2'
	st   = status
	co   = checkout
	cob  = checkout -b
	ds   = diff --staged
	aa   = !git add -u && git add . && git status
	ci   = commit
	cv   = commit -v
	cm   = commit -m
	cav  = commit -a -v
	cam  = commit -a -m
  ccc  = commit -eF .git/COMMIT_EDITMSG
	pick = cherry-pick
	pl   = pull origin HEAD
	ph   = push origin HEAD
	pup  = push -u origin HEAD
  phf  = push origin HEAD --force-with-lease
	track = !sh -c 'git branch --track "$0" "origin/$0" && git checkout "$0"'
	lg   = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr)%Creset' --abbrev-commit --date=relative
	who  = shortlog -n -s --no-merges
	sq   = merge --squash
	edc   = !git st | grep both | cut -c 19-120 | xargs -IFILE_NAME "$EDITOR \"FILE_NAME\""
	edm   = !git st | grep modified | cut -c 14-120 | xargs -IFILE_NAME "$EDITOR \"FILE_NAME\""
	com  = !git checkout $(git default-branch)
	cod  = checkout dev
	cos  = checkout stage
	cop  = checkout production
	irm  = !sh -c 'git rebase -i origin/$(git default-branch)'
	ird  = rebase -i origin/dev
	irs  = rebase -i origin/stage
	irs  = rebase -i origin/production
	up   = "!f() { git checkout ${1-main} && git fetch --prune origin && git rebase origin/${1-main}; }; f"
	upm  = !git up $(git default-branch)
	upd  = !git up dev
	ups  = !git up stage
	upp  = !git up production
	pr   = "!f() { git pull-request -b ${1-main}; }; f"
	prm   = !hub pull-request -b $(git default-branch)
	prd   = pull-request -b dev
	prs   = pull-request -b stage
	prp   = pull-request -b production
	scrub = !sh -c 'git checkout $(git default-branch) && git branch --merged | grep -Ev \"dev|main|master|stage|production\" | xargs git branch -d && git remote prune origin && git checkout -'
	amend = commit --amend
	wip = !git add -u && git commit -m "WIP"
	undo = reset HEAD~1 --mixed
  wipe = !git add -A && git commit -qm 'WIPE SAVEPOINT' && git reset HEAD~1 --hard
  gone = !sh -c 'git checkout $(git default-branch) && git branch -vv | grep \": gone\" | awk '\\''{print $1}'\\'''
  killgone = !sh -c 'git checkout $(git default-branch) && git branch -vv | grep \": gone\" | awk '\\''{print $1}'\\'' | xargs git branch -D'
  redate = !sh -c 'GIT_COMMITTER_DATE=\"$(date)\" git commit --amend --no-edit --date \"$(date)\" --no-verify'
  squash-branch = !sh -c 'git reset $(git merge-base $(git default-branch) $(git rev-parse --abbrev-ref HEAD))'
  branches = branch -v --sort='-committerdate'

[color]
	branch = auto
	diff = auto
	status = auto

[core]
	excludesfile = {{ .home }}/.gitignore_global
	pager = less -F -X

[diff]
  tool = vscode

[merge]
  tool = vscode

[difftool "vscode"]
  cmd = code --wait --diff $LOCAL $REMOTE

[mergetool "vscode"]
  cmd = code --wait $MERGED

[difftool "sourcetree"]
	cmd = opendiff \"$LOCAL\" \"$REMOTE\"
	path =

[mergetool "sourcetree"]
	cmd = /Applications/Sourcetree.app/Contents/Resources/opendiff-w.sh \"$LOCAL\" \"$REMOTE\" -ancestor \"$BASE\" -merge \"$MERGED\"
	trustExitCode = true

[pull]
	rebase = true

[push]
	default = matching

[hub]
	protocol = https

[init]
	templateDir = {{ .home }}/.git-templates/git-secrets
	defaultBranch = main

[secrets]
	providers = git secrets --aws-provider
	patterns = [A-Z0-9]{20}
	patterns = (\"|')?(AWS|aws|Aws)?_?(SECRET|secret|Secret)?_?(ACCESS|access|Access)?_?(KEY|key|Key)(\"|')?\\s*(:|=>|=)\\s*(\"|')?[A-Za-z0-9/\\+=]{40}(\"|')?
	patterns = (\"|')?(AWS|aws|Aws)?_?(ACCOUNT|account|Account)_?(ID|id|Id)?(\"|')?\\s*(:|=>|=)\\s*(\"|')?[0-9]{4}\\-?[0-9]{4}\\-?[0-9]{4}(\"|')?

[remote "origin"]
	prune = true

[rerere]
	enabled = true
